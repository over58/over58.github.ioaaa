---
title: 深克隆和浅克隆
tags: []
categories:
  - js知识库
comments: true
date: 2020-12-27 15:32:40
updated: 2020-12-27 15:32:40
---

# reduce用来删除对象的key-value

```js
const clean = (obj) => {
    return Object.keys(obj).reduce((acc, key) => {
        const value = obj[key];

        if (value === undefined || value === null) {
            return acc;
        }

        if (Array.isArray(value) && !value.length) {
            return acc;
        }

        if (
            Object.prototype.toString.call(value) === '[object Object]' &&
            !Object.keys(value).length
        ) {
            return acc;
        }


        acc[key] = value;

        return acc;
    }, {})
}


console.log(
    clean({
        name: 'sex',
        age: 0,
        hubbies: [],
        friends: null,
        likes: {}
    })
)



const clean2 = (obj, keys= []) => {
    return Object.keys(obj).reduce((acc, key) => {
        const value = obj[key];

        if(keys.includes(key)) {
            return acc
        }

        acc[key] = value;

        return acc;
    }, {})
}


console.log(
    clean2({
        name: 'sex',
        age: 0,
        hubbies: [],
        friends: null,
        likes: {}
    }, ['name', 'sex', 'likes'])
    
)

```

# when操作

```js
when(
    condition,
    whenTruthy = Function.prototype,
    whenFalsy = Function.prototype,
  ) {
    if (condition) {
      whenTruthy(this);
    } else {
      whenFalsy(this);
    }

    return this;
  }
```

